{"ast":null,"code":"import _regeneratorRuntime from\"/Users/soufelhanafi/souf-projects/fl/bachir/ceramic-milano/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(LOAD_PURCHASES),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(ADD_NEW_PURCHASE),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(UPDATE_PURCHASE),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(DELETE_PURCHASE),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(rootSaga);import{all,takeEvery,put,call,select}from'redux-saga/effects';import{message}from\"antd\";import*as purchaseApis from\"../../services/purchases\";import actions from\"./actions\";var getPurchasesState=function getPurchasesState(state){return state.purchases;};export function LOAD_PURCHASES(_ref){var payload,size,page,sort,order,search,response;return _regeneratorRuntime.wrap(function LOAD_PURCHASES$(_context){while(1){switch(_context.prev=_context.next){case 0:payload=_ref.payload;size=payload.size,page=payload.page,sort=payload.sort,order=payload.order,search=payload.search;_context.next=4;return put({type:actions.SET_STATE,payload:{loading:true}});case 4:_context.next=6;return call(purchaseApis.loadPurchases,size,page,sort,order,search);case 6:response=_context.sent;if(!response){_context.next=12;break;}_context.next=10;return put({type:actions.SET_STATE,payload:{loading:false,purchases:response.content,totalPages:response.totalPages,totalElements:response.totalElements,size:size,page:page,sort:sort,order:order}});case 10:_context.next=14;break;case 12:_context.next=14;return put({type:actions.SET_STATE,payload:{loading:false}});case 14:case\"end\":return _context.stop();}}},_marked);}export function ADD_NEW_PURCHASE(_ref2){var payload,newPurchase,response,_yield$select,size,page,sort,order;return _regeneratorRuntime.wrap(function ADD_NEW_PURCHASE$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref2.payload;newPurchase=payload.newPurchase;_context2.next=4;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 4:_context2.next=6;return call(purchaseApis.createNewPurchase,newPurchase);case 6:response=_context2.sent;if(!response){_context2.next=22;break;}_context2.next=10;return select(getPurchasesState);case 10:_yield$select=_context2.sent;size=_yield$select.size;page=_yield$select.page;sort=_yield$select.sort;order=_yield$select.order;message.success('Un nouveau purchase a été ajouté avec succés');_context2.next=18;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showAddModal:false}});case 18:_context2.next=20;return put({type:actions.LOAD_PURCHASES,payload:{size:size,page:page,sort:sort,order:order}});case 20:_context2.next=24;break;case 22:_context2.next=24;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:true,message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}});case 24:case\"end\":return _context2.stop();}}},_marked2);}export function UPDATE_PURCHASE(_ref3){var payload,purchaseToEdit,response,_yield$select2,size,page,sort,order;return _regeneratorRuntime.wrap(function UPDATE_PURCHASE$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=_ref3.payload;purchaseToEdit=payload.purchaseToEdit;_context3.next=4;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 4:_context3.next=6;return call(purchaseApis.updatePurchase,purchaseToEdit);case 6:response=_context3.sent;if(!response){_context3.next=22;break;}_context3.next=10;return select(getPurchasesState);case 10:_yield$select2=_context3.sent;size=_yield$select2.size;page=_yield$select2.page;sort=_yield$select2.sort;order=_yield$select2.order;message.success('Le purchase a été mis à jour avec succès');_context3.next=18;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showEditModal:false}});case 18:_context3.next=20;return put({type:actions.LOAD_PURCHASES,payload:{size:size,page:page,sort:sort,order:order}});case 20:_context3.next=25;break;case 22:_context3.next=24;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showEditModal:false}});case 24:message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');case 25:case\"end\":return _context3.stop();}}},_marked3);}export function DELETE_PURCHASE(_ref4){var payload,_yield$select3,purchaseToDelete,response,_yield$select4,size,page,sort,order;return _regeneratorRuntime.wrap(function DELETE_PURCHASE$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref4.payload;_context4.next=3;return select(getPurchasesState);case 3:_yield$select3=_context4.sent;purchaseToDelete=_yield$select3.purchaseToDelete;_context4.next=7;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 7:_context4.next=9;return call(purchaseApis.deletePurchase,purchaseToDelete);case 9:response=_context4.sent;if(!response){_context4.next=25;break;}_context4.next=13;return select(getPurchasesState);case 13:_yield$select4=_context4.sent;size=_yield$select4.size;page=_yield$select4.page;sort=_yield$select4.sort;order=_yield$select4.order;message.success('le purchase a été supprimé avec succès');_context4.next=21;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showDeleteModal:false}});case 21:_context4.next=23;return put({type:actions.LOAD_PURCHASES,payload:{size:size,page:page,sort:sort,order:order}});case 23:_context4.next=28;break;case 25:_context4.next=27;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showDeleteModal:false}});case 27:message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');case 28:case\"end\":return _context4.stop();}}},_marked4);}export default function rootSaga(){return _regeneratorRuntime.wrap(function rootSaga$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return all([takeEvery(actions.LOAD_PURCHASES,LOAD_PURCHASES),takeEvery(actions.ADD_NEW_PURCHASE,ADD_NEW_PURCHASE),takeEvery(actions.UPDATE_PURCHASE,UPDATE_PURCHASE),takeEvery(actions.DELETE_PURCHASE,DELETE_PURCHASE)]);case 2:case\"end\":return _context5.stop();}}},_marked5);}","map":{"version":3,"sources":["/Users/soufelhanafi/souf-projects/fl/bachir/ceramic-milano/frontend/src/redux/purchase/sagas.js"],"names":["LOAD_PURCHASES","ADD_NEW_PURCHASE","UPDATE_PURCHASE","DELETE_PURCHASE","rootSaga","all","takeEvery","put","call","select","message","purchaseApis","actions","getPurchasesState","state","purchases","payload","size","page","sort","order","search","type","SET_STATE","loading","loadPurchases","response","content","totalPages","totalElements","newPurchase","loadingInModal","createNewPurchase","success","showErrorMessage","showAddModal","purchaseToEdit","updatePurchase","showEditModal","error","purchaseToDelete","deletePurchase","showDeleteModal"],"mappings":"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","sourcesContent":["import { all, takeEvery, put, call, select } from 'redux-saga/effects'\nimport {message} from \"antd\"\nimport * as purchaseApis from \"../../services/purchases\"\nimport actions from \"./actions\"\n\nconst getPurchasesState = state => state.purchases\n\nexport function* LOAD_PURCHASES({payload}){\n  const {size, page, sort, order, search} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loading: true}\n  })\n  const response = yield call(purchaseApis.loadPurchases,size, page, sort, order, search)\n  if (response) {\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false,\n        purchases: response.content,\n        totalPages: response.totalPages,\n        totalElements: response.totalElements,\n        size, page, sort, order }\n    })\n  }else{\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false }\n    })\n  }\n}\n\nexport function* ADD_NEW_PURCHASE({payload}){\n  const {newPurchase} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(purchaseApis.createNewPurchase,newPurchase)\n  if(response){\n    const {size, page, sort, order} = yield select(getPurchasesState)\n    message.success('Un nouveau purchase a été ajouté avec succés');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:false, showAddModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PURCHASES,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:true, message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}\n    })\n  }\n}\n\nexport function* UPDATE_PURCHASE({payload}){\n  const {purchaseToEdit} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(purchaseApis.updatePurchase, purchaseToEdit)\n  if(response){\n    const {size, page, sort, order} = yield select(getPurchasesState)\n    message.success('Le purchase a été mis à jour avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showEditModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PURCHASES,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showEditModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport function* DELETE_PURCHASE({payload}){\n  const {purchaseToDelete} = yield select(getPurchasesState)\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(purchaseApis.deletePurchase, purchaseToDelete)\n  if(response){\n    const {size, page, sort, order} = yield select(getPurchasesState)\n    message.success('le purchase a été supprimé avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showDeleteModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PURCHASES,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showDeleteModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport default function* rootSaga() {\n  yield all([\n    takeEvery(actions.LOAD_PURCHASES, LOAD_PURCHASES),\n    takeEvery(actions.ADD_NEW_PURCHASE, ADD_NEW_PURCHASE),\n    takeEvery(actions.UPDATE_PURCHASE, UPDATE_PURCHASE),\n    takeEvery(actions.DELETE_PURCHASE, DELETE_PURCHASE),\n  ])\n}\n"]},"metadata":{},"sourceType":"module"}