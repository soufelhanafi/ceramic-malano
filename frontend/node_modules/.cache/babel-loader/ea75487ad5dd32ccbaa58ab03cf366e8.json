{"ast":null,"code":"import _regeneratorRuntime from\"/Users/soufelhanafi/souf-projects/fl/bachir/ceramic-milano-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(LOAD_PRODUCTS),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(ADD_NEW_PRODUCT),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(UPDATE_PRODUCT),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(DELETE_PRODUCT),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(ADD_CATEGORY),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(LOAD_CATEGORIES),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(rootSaga);import{all,takeEvery,put,call,select}from'redux-saga/effects';import{message}from\"antd\";import*as productApis from\"../../services/products\";import actions from\"./actions\";var getProductsState=function getProductsState(state){return state.products;};export function LOAD_PRODUCTS(_ref){var payload,size,page,sort,order,search,response;return _regeneratorRuntime.wrap(function LOAD_PRODUCTS$(_context){while(1){switch(_context.prev=_context.next){case 0:payload=_ref.payload;size=payload.size,page=payload.page,sort=payload.sort,order=payload.order,search=payload.search;_context.next=4;return put({type:actions.SET_STATE,payload:{loading:true}});case 4:_context.next=6;return call(productApis.loadProducts,size,page,sort,order,search);case 6:response=_context.sent;if(!response){_context.next=12;break;}_context.next=10;return put({type:actions.SET_STATE,payload:{loading:false,products:response.content,totalPages:response.totalPages,totalElements:response.totalElements,size:size,page:page,sort:sort,order:order}});case 10:_context.next=14;break;case 12:_context.next=14;return put({type:actions.SET_STATE,payload:{loading:false}});case 14:case\"end\":return _context.stop();}}},_marked);}export function ADD_NEW_PRODUCT(_ref2){var payload,newProduct,response,_yield$select,size,page,sort,order;return _regeneratorRuntime.wrap(function ADD_NEW_PRODUCT$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref2.payload;newProduct=payload.newProduct;_context2.next=4;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 4:_context2.next=6;return call(productApis.createNewProduct,newProduct);case 6:response=_context2.sent;if(!response){_context2.next=22;break;}_context2.next=10;return select(getProductsState);case 10:_yield$select=_context2.sent;size=_yield$select.size;page=_yield$select.page;sort=_yield$select.sort;order=_yield$select.order;message.success('Un nouveau produit a été ajouté avec succés');_context2.next=18;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showAddModal:false}});case 18:_context2.next=20;return put({type:actions.LOAD_PRODUCTS,payload:{size:size,page:page,sort:sort,order:order}});case 20:_context2.next=24;break;case 22:_context2.next=24;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:true,message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}});case 24:case\"end\":return _context2.stop();}}},_marked2);}export function UPDATE_PRODUCT(_ref3){var payload,productToEdit,response,_yield$select2,size,page,sort,order;return _regeneratorRuntime.wrap(function UPDATE_PRODUCT$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=_ref3.payload;productToEdit=payload.productToEdit;_context3.next=4;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 4:_context3.next=6;return call(productApis.updateProduct,productToEdit);case 6:response=_context3.sent;if(!response){_context3.next=22;break;}_context3.next=10;return select(getProductsState);case 10:_yield$select2=_context3.sent;size=_yield$select2.size;page=_yield$select2.page;sort=_yield$select2.sort;order=_yield$select2.order;message.success('Le produit a été mis à jour avec succès');_context3.next=18;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showEditModal:false}});case 18:_context3.next=20;return put({type:actions.LOAD_PRODUCTS,payload:{size:size,page:page,sort:sort,order:order}});case 20:_context3.next=25;break;case 22:_context3.next=24;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showEditModal:false}});case 24:message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');case 25:case\"end\":return _context3.stop();}}},_marked3);}export function DELETE_PRODUCT(_ref4){var payload,_yield$select3,productToDelete,response,_yield$select4,size,page,sort,order;return _regeneratorRuntime.wrap(function DELETE_PRODUCT$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref4.payload;_context4.next=3;return select(getProductsState);case 3:_yield$select3=_context4.sent;productToDelete=_yield$select3.productToDelete;_context4.next=7;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 7:_context4.next=9;return call(productApis.deleteProduct,productToDelete);case 9:response=_context4.sent;if(!response){_context4.next=25;break;}_context4.next=13;return select(getProductsState);case 13:_yield$select4=_context4.sent;size=_yield$select4.size;page=_yield$select4.page;sort=_yield$select4.sort;order=_yield$select4.order;message.success('le produit a été supprimé avec succès');_context4.next=21;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showDeleteModal:false}});case 21:_context4.next=23;return put({type:actions.LOAD_PRODUCTS,payload:{size:size,page:page,sort:sort,order:order}});case 23:_context4.next=28;break;case 25:_context4.next=27;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showDeleteModal:false}});case 27:message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');case 28:case\"end\":return _context4.stop();}}},_marked4);}export function ADD_CATEGORY(_ref5){var payload,newCat,response;return _regeneratorRuntime.wrap(function ADD_CATEGORY$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:payload=_ref5.payload;newCat=payload.newCat;_context5.next=4;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 4:_context5.next=6;return call(productApis.createNewCat,newCat);case 6:response=_context5.sent;if(!response){_context5.next=15;break;}message.success('Un nouvelle catégorie a été ajoutée avec succés');_context5.next=11;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showAddCategoryModal:false}});case 11:_context5.next=13;return put({type:actions.LOAD_CATEGORIES});case 13:_context5.next=17;break;case 15:_context5.next=17;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:true,message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}});case 17:case\"end\":return _context5.stop();}}},_marked5);}export function LOAD_CATEGORIES(){var response;return _regeneratorRuntime.wrap(function LOAD_CATEGORIES$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return put({type:actions.SET_STATE,payload:{loading:true}});case 2:_context6.next=4;return call(productApis.loadCategories);case 4:response=_context6.sent;if(!response){_context6.next=10;break;}_context6.next=8;return put({type:actions.SET_STATE,payload:{loading:false,categories:response}});case 8:_context6.next=12;break;case 10:_context6.next=12;return put({type:actions.SET_STATE,payload:{loading:false}});case 12:case\"end\":return _context6.stop();}}},_marked6);}export default function rootSaga(){return _regeneratorRuntime.wrap(function rootSaga$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return all([takeEvery(actions.LOAD_PRODUCTS,LOAD_PRODUCTS),takeEvery(actions.ADD_NEW_PRODUCT,ADD_NEW_PRODUCT),takeEvery(actions.UPDATE_PRODUCT,UPDATE_PRODUCT),takeEvery(actions.DELETE_PRODUCT,DELETE_PRODUCT),takeEvery(actions.ADD_CATEGORY,ADD_CATEGORY),takeEvery(actions.LOAD_CATEGORIES,LOAD_CATEGORIES)]);case 2:case\"end\":return _context7.stop();}}},_marked7);}","map":{"version":3,"sources":["/Users/soufelhanafi/souf-projects/fl/bachir/ceramic-milano-frontend/src/redux/products/sagas.js"],"names":["LOAD_PRODUCTS","ADD_NEW_PRODUCT","UPDATE_PRODUCT","DELETE_PRODUCT","ADD_CATEGORY","LOAD_CATEGORIES","rootSaga","all","takeEvery","put","call","select","message","productApis","actions","getProductsState","state","products","payload","size","page","sort","order","search","type","SET_STATE","loading","loadProducts","response","content","totalPages","totalElements","newProduct","loadingInModal","createNewProduct","success","showErrorMessage","showAddModal","productToEdit","updateProduct","showEditModal","error","productToDelete","deleteProduct","showDeleteModal","newCat","createNewCat","showAddCategoryModal","loadCategories","categories"],"mappings":"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","sourcesContent":["import { all, takeEvery, put, call, select } from 'redux-saga/effects'\nimport {message} from \"antd\"\nimport * as productApis from \"../../services/products\"\nimport actions from \"./actions\"\n\nconst getProductsState = state => state.products\n\nexport function* LOAD_PRODUCTS({payload}){\n  const {size, page, sort, order, search} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loading: true}\n  })\n  const response = yield call(productApis.loadProducts,size, page, sort, order, search)\n  if (response) {\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false,\n        products: response.content,\n        totalPages: response.totalPages,\n        totalElements: response.totalElements,\n        size, page, sort, order }\n    })\n  }else{\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false }\n    })\n  }\n}\n\nexport function* ADD_NEW_PRODUCT({payload}){\n  const {newProduct} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(productApis.createNewProduct,newProduct)\n  if(response){\n    const {size, page, sort, order} = yield select(getProductsState)\n    message.success('Un nouveau produit a été ajouté avec succés');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:false, showAddModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PRODUCTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:true, message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}\n    })\n  }\n}\n\nexport function* UPDATE_PRODUCT({payload}){\n  const {productToEdit} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(productApis.updateProduct, productToEdit)\n  if(response){\n    const {size, page, sort, order} = yield select(getProductsState)\n    message.success('Le produit a été mis à jour avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showEditModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PRODUCTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showEditModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport function* DELETE_PRODUCT({payload}){\n  const {productToDelete} = yield select(getProductsState)\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(productApis.deleteProduct, productToDelete)\n  if(response){\n    const {size, page, sort, order} = yield select(getProductsState)\n    message.success('le produit a été supprimé avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showDeleteModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PRODUCTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showDeleteModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport function* ADD_CATEGORY({payload}){\n  const {newCat} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(productApis.createNewCat, newCat)\n  if(response){\n    message.success('Un nouvelle catégorie a été ajoutée avec succés');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:false, showAddCategoryModal: false}\n    })\n    yield put({\n      type:actions.LOAD_CATEGORIES,\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:true, message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}\n    })\n  }\n}\n\nexport function* LOAD_CATEGORIES(){\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loading: true}\n  })\n  const response = yield call(productApis.loadCategories)\n  if (response) {\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false, categories: response}\n    })\n  }else{\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false }\n    })\n  }\n}\n\n\nexport default function* rootSaga() {\n  yield all([\n    takeEvery(actions.LOAD_PRODUCTS, LOAD_PRODUCTS),\n    takeEvery(actions.ADD_NEW_PRODUCT, ADD_NEW_PRODUCT),\n    takeEvery(actions.UPDATE_PRODUCT, UPDATE_PRODUCT),\n    takeEvery(actions.DELETE_PRODUCT, DELETE_PRODUCT),\n    takeEvery(actions.ADD_CATEGORY, ADD_CATEGORY),\n    takeEvery(actions.LOAD_CATEGORIES, LOAD_CATEGORIES),\n  ])\n}\n"]},"metadata":{},"sourceType":"module"}