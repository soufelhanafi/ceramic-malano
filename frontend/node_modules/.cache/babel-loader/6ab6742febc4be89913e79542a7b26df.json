{"ast":null,"code":"import { all, takeEvery, put, call, select } from 'redux-saga/effects';\nimport { message } from \"antd\";\nimport * as productApis from \"../../services/products\";\nimport actions from \"./actions\";\n\nconst getProductsState = state => state.products;\n\nexport function* LOAD_PRODUCTS({\n  payload\n}) {\n  const {\n    size,\n    page,\n    sort,\n    order,\n    search\n  } = payload;\n  yield put({\n    type: actions.SET_STATE,\n    payload: {\n      loading: true\n    }\n  });\n  const response = yield call(productApis.loadProducts, size, page, sort, order, search);\n\n  if (response) {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loading: false,\n        products: response.content,\n        totalPages: response.totalPages,\n        totalElements: response.totalElements,\n        size,\n        page,\n        sort,\n        order\n      }\n    });\n  } else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loading: false\n      }\n    });\n  }\n}\nexport function* ADD_NEW_PRODUCT({\n  payload\n}) {\n  const {\n    newProduct\n  } = payload;\n  yield put({\n    type: actions.SET_STATE,\n    payload: {\n      loadingInModal: true\n    }\n  });\n  const response = yield call(productApis.createNewProduct, newProduct);\n\n  if (response) {\n    const {\n      size,\n      page,\n      sort,\n      order\n    } = yield select(getProductsState);\n    message.success('Un nouveau produit a été ajouté avec succés');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showErrorMessage: false,\n        showAddModal: false\n      }\n    });\n    yield put({\n      type: actions.LOAD_PRODUCTS,\n      payload: {\n        size,\n        page,\n        sort,\n        order\n      }\n    });\n  } else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showErrorMessage: true,\n        message: \"Une erreur est survenue, veuillez réessayez dans quelques minutes\"\n      }\n    });\n  }\n}\nexport function* UPDATE_PRODUCT({\n  payload\n}) {\n  const {\n    productToEdit\n  } = payload;\n  yield put({\n    type: actions.SET_STATE,\n    payload: {\n      loadingInModal: true\n    }\n  });\n  const response = yield call(productApis.updateProduct, productToEdit);\n\n  if (response) {\n    const {\n      size,\n      page,\n      sort,\n      order\n    } = yield select(getProductsState);\n    message.success('Le produit a été mis à jour avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showErrorMessage: false,\n        showEditModal: false\n      }\n    });\n    yield put({\n      type: actions.LOAD_PRODUCTS,\n      payload: {\n        size,\n        page,\n        sort,\n        order\n      }\n    });\n  } else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showEditModal: false\n      }\n    });\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\nexport function* DELETE_PRODUCT({\n  payload\n}) {\n  const {\n    productToDelete\n  } = yield select(getProductsState);\n  yield put({\n    type: actions.SET_STATE,\n    payload: {\n      loadingInModal: true\n    }\n  });\n  const response = yield call(productApis.deleteProduct, productToDelete);\n\n  if (response) {\n    const {\n      size,\n      page,\n      sort,\n      order\n    } = yield select(getProductsState);\n    message.success('le produit a été supprimé avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showErrorMessage: false,\n        showDeleteModal: false\n      }\n    });\n    yield put({\n      type: actions.LOAD_PRODUCTS,\n      payload: {\n        size,\n        page,\n        sort,\n        order\n      }\n    });\n  } else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showDeleteModal: false\n      }\n    });\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\nexport default function* rootSaga() {\n  yield all([takeEvery(actions.LOAD_PRODUCTS, LOAD_PRODUCTS), takeEvery(actions.ADD_NEW_PRODUCT, ADD_NEW_PRODUCT), takeEvery(actions.UPDATE_PRODUCT, UPDATE_PRODUCT), takeEvery(actions.DELETE_PRODUCT, DELETE_PRODUCT)]);\n}","map":{"version":3,"sources":["/Users/soufelhanafi/souf-projects/fl/bachir/ceramic-milano-frontend/src/redux/products/sagas.js"],"names":["all","takeEvery","put","call","select","message","productApis","actions","getProductsState","state","products","LOAD_PRODUCTS","payload","size","page","sort","order","search","type","SET_STATE","loading","response","loadProducts","content","totalPages","totalElements","ADD_NEW_PRODUCT","newProduct","loadingInModal","createNewProduct","success","showErrorMessage","showAddModal","UPDATE_PRODUCT","productToEdit","updateProduct","showEditModal","error","DELETE_PRODUCT","productToDelete","deleteProduct","showDeleteModal","rootSaga"],"mappings":"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","sourcesContent":["import { all, takeEvery, put, call, select } from 'redux-saga/effects'\nimport {message} from \"antd\"\nimport * as productApis from \"../../services/products\"\nimport actions from \"./actions\"\n\nconst getProductsState = state => state.products\n\nexport function* LOAD_PRODUCTS({payload}){\n  const {size, page, sort, order, search} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loading: true}\n  })\n  const response = yield call(productApis.loadProducts,size, page, sort, order, search)\n  if (response) {\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false,\n        products: response.content,\n        totalPages: response.totalPages,\n        totalElements: response.totalElements,\n        size, page, sort, order }\n    })\n  }else{\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false }\n    })\n  }\n}\n\nexport function* ADD_NEW_PRODUCT({payload}){\n  const {newProduct} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(productApis.createNewProduct,newProduct)\n  if(response){\n    const {size, page, sort, order} = yield select(getProductsState)\n    message.success('Un nouveau produit a été ajouté avec succés');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:false, showAddModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PRODUCTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:true, message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}\n    })\n  }\n}\n\nexport function* UPDATE_PRODUCT({payload}){\n  const {productToEdit} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(productApis.updateProduct, productToEdit)\n  if(response){\n    const {size, page, sort, order} = yield select(getProductsState)\n    message.success('Le produit a été mis à jour avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showEditModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PRODUCTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showEditModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport function* DELETE_PRODUCT({payload}){\n  const {productToDelete} = yield select(getProductsState)\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(productApis.deleteProduct, productToDelete)\n  if(response){\n    const {size, page, sort, order} = yield select(getProductsState)\n    message.success('le produit a été supprimé avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showDeleteModal: false}\n    })\n    yield put({\n      type:actions.LOAD_PRODUCTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showDeleteModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport default function* rootSaga() {\n  yield all([\n    takeEvery(actions.LOAD_PRODUCTS, LOAD_PRODUCTS),\n    takeEvery(actions.ADD_NEW_PRODUCT, ADD_NEW_PRODUCT),\n    takeEvery(actions.UPDATE_PRODUCT, UPDATE_PRODUCT),\n    takeEvery(actions.DELETE_PRODUCT, DELETE_PRODUCT),\n  ])\n}\n"]},"metadata":{},"sourceType":"module"}