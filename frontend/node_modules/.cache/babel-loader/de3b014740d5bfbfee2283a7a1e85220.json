{"ast":null,"code":"import { all, takeEvery, put, call, select } from 'redux-saga/effects';\nimport { message } from \"antd\";\nimport * as clientApis from \"../../services/clients\";\nimport actions from \"./actions\";\n\nconst getClientsState = state => state.clients;\n\nexport function* LOAD_CLIENTS({\n  payload\n}) {\n  const {\n    size,\n    page,\n    sort,\n    order,\n    search\n  } = payload;\n  yield put({\n    type: actions.SET_STATE,\n    payload: {\n      loading: true\n    }\n  });\n  const response = yield call(clientApis.loadClients, size, page, sort, order, search);\n\n  if (response) {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loading: false,\n        clients: response.content,\n        totalPages: response.totalPages,\n        totalElements: response.totalElements,\n        size,\n        page,\n        sort,\n        order\n      }\n    });\n  } else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loading: false\n      }\n    });\n  }\n}\nexport function* ADD_NEW_CLIENT({\n  payload\n}) {\n  const {\n    newClient\n  } = payload;\n  yield put({\n    type: actions.SET_STATE,\n    payload: {\n      loadingInModal: true\n    }\n  });\n  const response = yield call(clientApis.createNewClinet, newClient);\n\n  if (response) {\n    const {\n      size,\n      page,\n      sort,\n      order\n    } = yield select(getClientsState);\n    message.success('Un nouveau client a été ajouté avec succés');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showErrorMessage: false,\n        showAddModal: false\n      }\n    });\n    yield put({\n      type: actions.LOAD_CLIENTS,\n      payload: {\n        size,\n        page,\n        sort,\n        order\n      }\n    });\n  } else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showErrorMessage: true,\n        message: \"Une erreur est survenue, veuillez réessayez dans quelques minutes\"\n      }\n    });\n  }\n}\nexport function* UPDATE_CLIENT({\n  payload\n}) {\n  const {\n    clientToEdit\n  } = payload;\n  yield put({\n    type: actions.SET_STATE,\n    payload: {\n      loadingInModal: true\n    }\n  });\n  const response = yield call(clientApis.updateClient, clientToEdit);\n\n  if (response) {\n    const {\n      size,\n      page,\n      sort,\n      order\n    } = yield select(getClientsState);\n    message.success('Le client a été mis à jour avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showErrorMessage: false,\n        showEditModal: false\n      }\n    });\n    yield put({\n      type: actions.LOAD_CLIENTS,\n      payload: {\n        size,\n        page,\n        sort,\n        order\n      }\n    });\n  } else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showEditModal: false\n      }\n    });\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\nexport function* DELETE_CLIENT({\n  payload\n}) {\n  const {\n    clientToDelete\n  } = yield select(getClientsState);\n  yield put({\n    type: actions.SET_STATE,\n    payload: {\n      loadingInModal: true\n    }\n  });\n  const response = yield call(clientApis.deleteClient, clientToDelete);\n\n  if (response) {\n    const {\n      size,\n      page,\n      sort,\n      order\n    } = yield select(getClientsState);\n    message.success('le client a été supprimé avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showErrorMessage: false,\n        showDeleteModal: false\n      }\n    });\n    yield put({\n      type: actions.LOAD_CLIENTS,\n      payload: {\n        size,\n        page,\n        sort,\n        order\n      }\n    });\n  } else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {\n        loadingInModal: false,\n        showDeleteModal: false\n      }\n    });\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\nexport default function* rootSaga() {\n  yield all([takeEvery(actions.LOAD_CLIENTS, LOAD_CLIENTS), takeEvery(actions.ADD_NEW_CLIENT, ADD_NEW_CLIENT), takeEvery(actions.UPDATE_CLIENT, UPDATE_CLIENT), takeEvery(actions.DELETE_CLIENT, DELETE_CLIENT)]);\n}","map":{"version":3,"sources":["/Users/soufelhanafi/souf-projects/fl/bachir/ceramic-milano-frontend/src/redux/clients/sagas.js"],"names":["all","takeEvery","put","call","select","message","clientApis","actions","getClientsState","state","clients","LOAD_CLIENTS","payload","size","page","sort","order","search","type","SET_STATE","loading","response","loadClients","content","totalPages","totalElements","ADD_NEW_CLIENT","newClient","loadingInModal","createNewClinet","success","showErrorMessage","showAddModal","UPDATE_CLIENT","clientToEdit","updateClient","showEditModal","error","DELETE_CLIENT","clientToDelete","deleteClient","showDeleteModal","rootSaga"],"mappings":"AAAA,SAASA,GAAT,EAAcC,SAAd,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoCC,MAApC,QAAkD,oBAAlD;AACA,SAAQC,OAAR,QAAsB,MAAtB;AACA,OAAO,KAAKC,UAAZ,MAA4B,wBAA5B;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,eAAe,GAAGC,KAAK,IAAIA,KAAK,CAACC,OAAvC;;AAEA,OAAO,UAAUC,YAAV,CAAuB;AAACC,EAAAA;AAAD,CAAvB,EAAiC;AACtC,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA,IAAP;AAAaC,IAAAA,IAAb;AAAmBC,IAAAA,KAAnB;AAA0BC,IAAAA;AAA1B,MAAoCL,OAA1C;AACA,QAAMV,GAAG,CAAC;AACRgB,IAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,IAAAA,OAAO,EAAE;AAACQ,MAAAA,OAAO,EAAE;AAAV;AAFD,GAAD,CAAT;AAIA,QAAMC,QAAQ,GAAG,MAAMlB,IAAI,CAACG,UAAU,CAACgB,WAAZ,EAAwBT,IAAxB,EAA8BC,IAA9B,EAAoCC,IAApC,EAA0CC,KAA1C,EAAiDC,MAAjD,CAA3B;;AACA,MAAII,QAAJ,EAAc;AACZ,UAAMnB,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,MAAAA,OAAO,EAAC;AAAEQ,QAAAA,OAAO,EAAC,KAAV;AACNV,QAAAA,OAAO,EAAEW,QAAQ,CAACE,OADZ;AAENC,QAAAA,UAAU,EAAEH,QAAQ,CAACG,UAFf;AAGNC,QAAAA,aAAa,EAAEJ,QAAQ,CAACI,aAHlB;AAINZ,QAAAA,IAJM;AAIAC,QAAAA,IAJA;AAIMC,QAAAA,IAJN;AAIYC,QAAAA;AAJZ;AAFA,KAAD,CAAT;AAQD,GATD,MASK;AACH,UAAMd,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,MAAAA,OAAO,EAAC;AAAEQ,QAAAA,OAAO,EAAC;AAAV;AAFA,KAAD,CAAT;AAID;AACF;AAED,OAAO,UAAUM,cAAV,CAAyB;AAACd,EAAAA;AAAD,CAAzB,EAAmC;AACxC,QAAM;AAACe,IAAAA;AAAD,MAAcf,OAApB;AACA,QAAMV,GAAG,CAAC;AACRgB,IAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,IAAAA,OAAO,EAAE;AAACgB,MAAAA,cAAc,EAAC;AAAhB;AAFD,GAAD,CAAT;AAIA,QAAMP,QAAQ,GAAG,MAAMlB,IAAI,CAACG,UAAU,CAACuB,eAAZ,EAA4BF,SAA5B,CAA3B;;AACA,MAAGN,QAAH,EAAY;AACV,UAAM;AAACR,MAAAA,IAAD;AAAOC,MAAAA,IAAP;AAAaC,MAAAA,IAAb;AAAmBC,MAAAA;AAAnB,QAA4B,MAAMZ,MAAM,CAACI,eAAD,CAA9C;AACAH,IAAAA,OAAO,CAACyB,OAAR,CAAgB,4CAAhB;AACA,UAAM5B,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,MAAAA,OAAO,EAAE;AAACgB,QAAAA,cAAc,EAAC,KAAhB;AAAuBG,QAAAA,gBAAgB,EAAC,KAAxC;AAA+CC,QAAAA,YAAY,EAAE;AAA7D;AAFD,KAAD,CAAT;AAIA,UAAM9B,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAACX,OAAO,CAACI,YADL;AAERC,MAAAA,OAAO,EAAE;AAACC,QAAAA,IAAD;AAAOC,QAAAA,IAAP;AAAaC,QAAAA,IAAb;AAAmBC,QAAAA;AAAnB;AAFD,KAAD,CAAT;AAID,GAXD,MAWM;AACJ,UAAMd,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,MAAAA,OAAO,EAAE;AAACgB,QAAAA,cAAc,EAAC,KAAhB;AAAuBG,QAAAA,gBAAgB,EAAC,IAAxC;AAA8C1B,QAAAA,OAAO,EAAC;AAAtD;AAFD,KAAD,CAAT;AAID;AACF;AAED,OAAO,UAAU4B,aAAV,CAAwB;AAACrB,EAAAA;AAAD,CAAxB,EAAkC;AACvC,QAAM;AAACsB,IAAAA;AAAD,MAAiBtB,OAAvB;AACA,QAAMV,GAAG,CAAC;AACRgB,IAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,IAAAA,OAAO,EAAE;AAACgB,MAAAA,cAAc,EAAC;AAAhB;AAFD,GAAD,CAAT;AAIA,QAAMP,QAAQ,GAAG,MAAMlB,IAAI,CAACG,UAAU,CAAC6B,YAAZ,EAA0BD,YAA1B,CAA3B;;AACA,MAAGb,QAAH,EAAY;AACV,UAAM;AAACR,MAAAA,IAAD;AAAOC,MAAAA,IAAP;AAAaC,MAAAA,IAAb;AAAmBC,MAAAA;AAAnB,QAA4B,MAAMZ,MAAM,CAACI,eAAD,CAA9C;AACAH,IAAAA,OAAO,CAACyB,OAAR,CAAgB,wCAAhB;AACA,UAAM5B,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,MAAAA,OAAO,EAAE;AAACgB,QAAAA,cAAc,EAAE,KAAjB;AAAwBG,QAAAA,gBAAgB,EAAC,KAAzC;AAAgDK,QAAAA,aAAa,EAAE;AAA/D;AAFD,KAAD,CAAT;AAIA,UAAMlC,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAACX,OAAO,CAACI,YADL;AAERC,MAAAA,OAAO,EAAE;AAACC,QAAAA,IAAD;AAAOC,QAAAA,IAAP;AAAaC,QAAAA,IAAb;AAAmBC,QAAAA;AAAnB;AAFD,KAAD,CAAT;AAID,GAXD,MAWM;AACJ,UAAMd,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,MAAAA,OAAO,EAAE;AAACgB,QAAAA,cAAc,EAAC,KAAhB;AAAuBQ,QAAAA,aAAa,EAAE;AAAtC;AAFD,KAAD,CAAT;AAIA/B,IAAAA,OAAO,CAACgC,KAAR,CAAc,mEAAd;AACD;AACF;AAED,OAAO,UAAUC,aAAV,CAAwB;AAAC1B,EAAAA;AAAD,CAAxB,EAAkC;AACvC,QAAM;AAAC2B,IAAAA;AAAD,MAAmB,MAAMnC,MAAM,CAACI,eAAD,CAArC;AACA,QAAMN,GAAG,CAAC;AACRgB,IAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,IAAAA,OAAO,EAAE;AAACgB,MAAAA,cAAc,EAAC;AAAhB;AAFD,GAAD,CAAT;AAIA,QAAMP,QAAQ,GAAG,MAAMlB,IAAI,CAACG,UAAU,CAACkC,YAAZ,EAA0BD,cAA1B,CAA3B;;AACA,MAAGlB,QAAH,EAAY;AACV,UAAM;AAACR,MAAAA,IAAD;AAAOC,MAAAA,IAAP;AAAaC,MAAAA,IAAb;AAAmBC,MAAAA;AAAnB,QAA4B,MAAMZ,MAAM,CAACI,eAAD,CAA9C;AACAH,IAAAA,OAAO,CAACyB,OAAR,CAAgB,sCAAhB;AACA,UAAM5B,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,MAAAA,OAAO,EAAE;AAACgB,QAAAA,cAAc,EAAE,KAAjB;AAAwBG,QAAAA,gBAAgB,EAAC,KAAzC;AAAgDU,QAAAA,eAAe,EAAE;AAAjE;AAFD,KAAD,CAAT;AAIA,UAAMvC,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAACX,OAAO,CAACI,YADL;AAERC,MAAAA,OAAO,EAAE;AAACC,QAAAA,IAAD;AAAOC,QAAAA,IAAP;AAAaC,QAAAA,IAAb;AAAmBC,QAAAA;AAAnB;AAFD,KAAD,CAAT;AAID,GAXD,MAWM;AACJ,UAAMd,GAAG,CAAC;AACRgB,MAAAA,IAAI,EAAEX,OAAO,CAACY,SADN;AAERP,MAAAA,OAAO,EAAE;AAACgB,QAAAA,cAAc,EAAC,KAAhB;AAAuBa,QAAAA,eAAe,EAAE;AAAxC;AAFD,KAAD,CAAT;AAIApC,IAAAA,OAAO,CAACgC,KAAR,CAAc,mEAAd;AACD;AACF;AAED,eAAe,UAAUK,QAAV,GAAqB;AAClC,QAAM1C,GAAG,CAAC,CACRC,SAAS,CAACM,OAAO,CAACI,YAAT,EAAuBA,YAAvB,CADD,EAERV,SAAS,CAACM,OAAO,CAACmB,cAAT,EAAyBA,cAAzB,CAFD,EAGRzB,SAAS,CAACM,OAAO,CAAC0B,aAAT,EAAwBA,aAAxB,CAHD,EAIRhC,SAAS,CAACM,OAAO,CAAC+B,aAAT,EAAwBA,aAAxB,CAJD,CAAD,CAAT;AAMD","sourcesContent":["import { all, takeEvery, put, call, select } from 'redux-saga/effects'\nimport {message} from \"antd\"\nimport * as clientApis from \"../../services/clients\"\nimport actions from \"./actions\"\n\nconst getClientsState = state => state.clients\n\nexport function* LOAD_CLIENTS({payload}){\n  const {size, page, sort, order, search} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loading: true}\n  })\n  const response = yield call(clientApis.loadClients,size, page, sort, order, search)\n  if (response) {\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false,\n        clients: response.content,\n        totalPages: response.totalPages,\n        totalElements: response.totalElements,\n        size, page, sort, order }\n    })\n  }else{\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false }\n    })\n  }\n}\n\nexport function* ADD_NEW_CLIENT({payload}){\n  const {newClient} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(clientApis.createNewClinet,newClient)\n  if(response){\n    const {size, page, sort, order} = yield select(getClientsState)\n    message.success('Un nouveau client a été ajouté avec succés');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:false, showAddModal: false}\n    })\n    yield put({\n      type:actions.LOAD_CLIENTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:true, message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}\n    })\n  }\n}\n\nexport function* UPDATE_CLIENT({payload}){\n  const {clientToEdit} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(clientApis.updateClient, clientToEdit)\n  if(response){\n    const {size, page, sort, order} = yield select(getClientsState)\n    message.success('Le client a été mis à jour avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showEditModal: false}\n    })\n    yield put({\n      type:actions.LOAD_CLIENTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showEditModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport function* DELETE_CLIENT({payload}){\n  const {clientToDelete} = yield select(getClientsState)\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(clientApis.deleteClient, clientToDelete)\n  if(response){\n    const {size, page, sort, order} = yield select(getClientsState)\n    message.success('le client a été supprimé avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showDeleteModal: false}\n    })\n    yield put({\n      type:actions.LOAD_CLIENTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showDeleteModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport default function* rootSaga() {\n  yield all([\n    takeEvery(actions.LOAD_CLIENTS, LOAD_CLIENTS),\n    takeEvery(actions.ADD_NEW_CLIENT, ADD_NEW_CLIENT),\n    takeEvery(actions.UPDATE_CLIENT, UPDATE_CLIENT),\n    takeEvery(actions.DELETE_CLIENT, DELETE_CLIENT),\n  ])\n}\n"]},"metadata":{},"sourceType":"module"}