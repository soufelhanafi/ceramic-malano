{"ast":null,"code":"import _regeneratorRuntime from\"/Users/soufelhanafi/souf-projects/fl/bachir/ceramic-milano/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(LOAD_CLIENTS),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(ADD_NEW_CLIENT),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(UPDATE_CLIENT),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(DELETE_CLIENT),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(rootSaga);import{all,takeEvery,put,call,select}from'redux-saga/effects';import{message}from\"antd\";import*as clientApis from\"../../services/clients\";import actions from\"./actions\";var getClientsState=function getClientsState(state){return state.clients;};export function LOAD_CLIENTS(_ref){var payload,size,page,sort,order,search,response;return _regeneratorRuntime.wrap(function LOAD_CLIENTS$(_context){while(1){switch(_context.prev=_context.next){case 0:payload=_ref.payload;size=payload.size,page=payload.page,sort=payload.sort,order=payload.order,search=payload.search;_context.next=4;return put({type:actions.SET_STATE,payload:{loading:true}});case 4:_context.next=6;return call(clientApis.loadClients,size,page,sort,order,search);case 6:response=_context.sent;if(!response){_context.next=12;break;}_context.next=10;return put({type:actions.SET_STATE,payload:{loading:false,clients:response.content,totalPages:response.totalPages,totalElements:response.totalElements,size:size,page:page,sort:sort,order:order}});case 10:_context.next=14;break;case 12:_context.next=14;return put({type:actions.SET_STATE,payload:{loading:false}});case 14:case\"end\":return _context.stop();}}},_marked);}export function ADD_NEW_CLIENT(_ref2){var payload,newClient,response,_yield$select,size,page,sort,order;return _regeneratorRuntime.wrap(function ADD_NEW_CLIENT$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref2.payload;newClient=payload.newClient;_context2.next=4;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 4:_context2.next=6;return call(clientApis.createNewClinet,newClient);case 6:response=_context2.sent;if(!response){_context2.next=22;break;}_context2.next=10;return select(getClientsState);case 10:_yield$select=_context2.sent;size=_yield$select.size;page=_yield$select.page;sort=_yield$select.sort;order=_yield$select.order;message.success('Un nouveau client a été ajouté avec succés');_context2.next=18;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showAddModal:false}});case 18:_context2.next=20;return put({type:actions.LOAD_CLIENTS,payload:{size:size,page:page,sort:sort,order:order}});case 20:_context2.next=24;break;case 22:_context2.next=24;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:true,message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}});case 24:case\"end\":return _context2.stop();}}},_marked2);}export function UPDATE_CLIENT(_ref3){var payload,clientToEdit,response,_yield$select2,size,page,sort,order;return _regeneratorRuntime.wrap(function UPDATE_CLIENT$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=_ref3.payload;clientToEdit=payload.clientToEdit;_context3.next=4;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 4:_context3.next=6;return call(clientApis.updateClient,clientToEdit);case 6:response=_context3.sent;if(!response){_context3.next=22;break;}_context3.next=10;return select(getClientsState);case 10:_yield$select2=_context3.sent;size=_yield$select2.size;page=_yield$select2.page;sort=_yield$select2.sort;order=_yield$select2.order;message.success('Le client a été mis à jour avec succès');_context3.next=18;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showEditModal:false}});case 18:_context3.next=20;return put({type:actions.LOAD_CLIENTS,payload:{size:size,page:page,sort:sort,order:order}});case 20:_context3.next=25;break;case 22:_context3.next=24;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showEditModal:false}});case 24:message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');case 25:case\"end\":return _context3.stop();}}},_marked3);}export function DELETE_CLIENT(_ref4){var payload,_yield$select3,clientToDelete,response,_yield$select4,size,page,sort,order;return _regeneratorRuntime.wrap(function DELETE_CLIENT$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref4.payload;_context4.next=3;return select(getClientsState);case 3:_yield$select3=_context4.sent;clientToDelete=_yield$select3.clientToDelete;_context4.next=7;return put({type:actions.SET_STATE,payload:{loadingInModal:true}});case 7:_context4.next=9;return call(clientApis.deleteClient,clientToDelete);case 9:response=_context4.sent;if(!response){_context4.next=25;break;}_context4.next=13;return select(getClientsState);case 13:_yield$select4=_context4.sent;size=_yield$select4.size;page=_yield$select4.page;sort=_yield$select4.sort;order=_yield$select4.order;message.success('le client a été supprimé avec succès');_context4.next=21;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showErrorMessage:false,showDeleteModal:false}});case 21:_context4.next=23;return put({type:actions.LOAD_CLIENTS,payload:{size:size,page:page,sort:sort,order:order}});case 23:_context4.next=28;break;case 25:_context4.next=27;return put({type:actions.SET_STATE,payload:{loadingInModal:false,showDeleteModal:false}});case 27:message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');case 28:case\"end\":return _context4.stop();}}},_marked4);}export default function rootSaga(){return _regeneratorRuntime.wrap(function rootSaga$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return all([takeEvery(actions.LOAD_CLIENTS,LOAD_CLIENTS),takeEvery(actions.ADD_NEW_CLIENT,ADD_NEW_CLIENT),takeEvery(actions.UPDATE_CLIENT,UPDATE_CLIENT),takeEvery(actions.DELETE_CLIENT,DELETE_CLIENT)]);case 2:case\"end\":return _context5.stop();}}},_marked5);}","map":{"version":3,"sources":["/Users/soufelhanafi/souf-projects/fl/bachir/ceramic-milano/frontend/src/redux/clients/sagas.js"],"names":["LOAD_CLIENTS","ADD_NEW_CLIENT","UPDATE_CLIENT","DELETE_CLIENT","rootSaga","all","takeEvery","put","call","select","message","clientApis","actions","getClientsState","state","clients","payload","size","page","sort","order","search","type","SET_STATE","loading","loadClients","response","content","totalPages","totalElements","newClient","loadingInModal","createNewClinet","success","showErrorMessage","showAddModal","clientToEdit","updateClient","showEditModal","error","clientToDelete","deleteClient","showDeleteModal"],"mappings":"mOAOiBA,Y,iDAwBAC,c,iDA0BAC,a,iDA2BAC,a,iDA2BQC,Q,EA/GzB,OAASC,GAAT,CAAcC,SAAd,CAAyBC,GAAzB,CAA8BC,IAA9B,CAAoCC,MAApC,KAAkD,oBAAlD,CACA,OAAQC,OAAR,KAAsB,MAAtB,CACA,MAAO,GAAKC,CAAAA,UAAZ,KAA4B,wBAA5B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACC,OAAV,EAA7B,CAEA,MAAO,SAAUf,CAAAA,YAAV,6KAAwBgB,OAAxB,MAAwBA,OAAxB,CACEC,IADF,CACqCD,OADrC,CACEC,IADF,CACQC,IADR,CACqCF,OADrC,CACQE,IADR,CACcC,IADd,CACqCH,OADrC,CACcG,IADd,CACoBC,KADpB,CACqCJ,OADrC,CACoBI,KADpB,CAC2BC,MAD3B,CACqCL,OADrC,CAC2BK,MAD3B,iBAEL,MAAMd,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACQ,OAAO,CAAE,IAAV,CAFD,CAAD,CAAT,CAFK,uBAMY,MAAMhB,CAAAA,IAAI,CAACG,UAAU,CAACc,WAAZ,CAAwBR,IAAxB,CAA8BC,IAA9B,CAAoCC,IAApC,CAA0CC,KAA1C,CAAiDC,MAAjD,CAAV,CANZ,OAMCK,QAND,mBAODA,QAPC,2CAQH,MAAMnB,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAC,CAAEQ,OAAO,CAAC,KAAV,CACNT,OAAO,CAAEW,QAAQ,CAACC,OADZ,CAENC,UAAU,CAAEF,QAAQ,CAACE,UAFf,CAGNC,aAAa,CAAEH,QAAQ,CAACG,aAHlB,CAINZ,IAAI,CAAJA,IAJM,CAIAC,IAAI,CAAJA,IAJA,CAIMC,IAAI,CAAJA,IAJN,CAIYC,KAAK,CAALA,KAJZ,CAFA,CAAD,CAAT,CARG,wDAiBH,MAAMb,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAC,CAAEQ,OAAO,CAAC,KAAV,CAFA,CAAD,CAAT,CAjBG,uDAwBP,MAAO,SAAUvB,CAAAA,cAAV,oMAA0Be,OAA1B,OAA0BA,OAA1B,CACEc,SADF,CACed,OADf,CACEc,SADF,kBAEL,MAAMvB,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAC,IAAhB,CAFD,CAAD,CAAT,CAFK,wBAMY,MAAMvB,CAAAA,IAAI,CAACG,UAAU,CAACqB,eAAZ,CAA4BF,SAA5B,CAAV,CANZ,OAMCJ,QAND,oBAOFA,QAPE,6CAQ+B,MAAMjB,CAAAA,MAAM,CAACI,eAAD,CAAZ,CAR/B,qCAQII,IARJ,eAQIA,IARJ,CAQUC,IARV,eAQUA,IARV,CAQgBC,IARhB,eAQgBA,IARhB,CAQsBC,KARtB,eAQsBA,KARtB,CASHV,OAAO,CAACuB,OAAR,CAAgB,4CAAhB,EATG,kBAUH,MAAM1B,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAC,KAAhB,CAAuBG,gBAAgB,CAAC,KAAxC,CAA+CC,YAAY,CAAE,KAA7D,CAFD,CAAD,CAAT,CAVG,0BAcH,MAAM5B,CAAAA,GAAG,CAAC,CACRe,IAAI,CAACV,OAAO,CAACZ,YADL,CAERgB,OAAO,CAAE,CAACC,IAAI,CAAJA,IAAD,CAAOC,IAAI,CAAJA,IAAP,CAAaC,IAAI,CAAJA,IAAb,CAAmBC,KAAK,CAALA,KAAnB,CAFD,CAAD,CAAT,CAdG,0DAmBH,MAAMb,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAC,KAAhB,CAAuBG,gBAAgB,CAAC,IAAxC,CAA8CxB,OAAO,CAAC,mEAAtD,CAFD,CAAD,CAAT,CAnBG,yDA0BP,MAAO,SAAUR,CAAAA,aAAV,uMAAyBc,OAAzB,OAAyBA,OAAzB,CACEoB,YADF,CACkBpB,OADlB,CACEoB,YADF,kBAEL,MAAM7B,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAC,IAAhB,CAFD,CAAD,CAAT,CAFK,wBAMY,MAAMvB,CAAAA,IAAI,CAACG,UAAU,CAAC0B,YAAZ,CAA0BD,YAA1B,CAAV,CANZ,OAMCV,QAND,oBAOFA,QAPE,6CAQ+B,MAAMjB,CAAAA,MAAM,CAACI,eAAD,CAAZ,CAR/B,sCAQII,IARJ,gBAQIA,IARJ,CAQUC,IARV,gBAQUA,IARV,CAQgBC,IARhB,gBAQgBA,IARhB,CAQsBC,KARtB,gBAQsBA,KARtB,CASHV,OAAO,CAACuB,OAAR,CAAgB,wCAAhB,EATG,kBAUH,MAAM1B,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAE,KAAjB,CAAwBG,gBAAgB,CAAC,KAAzC,CAAgDI,aAAa,CAAE,KAA/D,CAFD,CAAD,CAAT,CAVG,0BAcH,MAAM/B,CAAAA,GAAG,CAAC,CACRe,IAAI,CAACV,OAAO,CAACZ,YADL,CAERgB,OAAO,CAAE,CAACC,IAAI,CAAJA,IAAD,CAAOC,IAAI,CAAJA,IAAP,CAAaC,IAAI,CAAJA,IAAb,CAAmBC,KAAK,CAALA,KAAnB,CAFD,CAAD,CAAT,CAdG,0DAmBH,MAAMb,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAC,KAAhB,CAAuBO,aAAa,CAAE,KAAtC,CAFD,CAAD,CAAT,CAnBG,QAuBH5B,OAAO,CAAC6B,KAAR,CAAc,mEAAd,EAvBG,yDA2BP,MAAO,SAAUpC,CAAAA,aAAV,wNAAyBa,OAAzB,OAAyBA,OAAzB,kBACoB,MAAMP,CAAAA,MAAM,CAACI,eAAD,CAAZ,CADpB,qCACE2B,cADF,gBACEA,cADF,kBAEL,MAAMjC,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAC,IAAhB,CAFD,CAAD,CAAT,CAFK,wBAMY,MAAMvB,CAAAA,IAAI,CAACG,UAAU,CAAC8B,YAAZ,CAA0BD,cAA1B,CAAV,CANZ,OAMCd,QAND,oBAOFA,QAPE,6CAQ+B,MAAMjB,CAAAA,MAAM,CAACI,eAAD,CAAZ,CAR/B,sCAQII,IARJ,gBAQIA,IARJ,CAQUC,IARV,gBAQUA,IARV,CAQgBC,IARhB,gBAQgBA,IARhB,CAQsBC,KARtB,gBAQsBA,KARtB,CASHV,OAAO,CAACuB,OAAR,CAAgB,sCAAhB,EATG,kBAUH,MAAM1B,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAE,KAAjB,CAAwBG,gBAAgB,CAAC,KAAzC,CAAgDQ,eAAe,CAAE,KAAjE,CAFD,CAAD,CAAT,CAVG,0BAcH,MAAMnC,CAAAA,GAAG,CAAC,CACRe,IAAI,CAACV,OAAO,CAACZ,YADL,CAERgB,OAAO,CAAE,CAACC,IAAI,CAAJA,IAAD,CAAOC,IAAI,CAAJA,IAAP,CAAaC,IAAI,CAAJA,IAAb,CAAmBC,KAAK,CAALA,KAAnB,CAFD,CAAD,CAAT,CAdG,0DAmBH,MAAMb,CAAAA,GAAG,CAAC,CACRe,IAAI,CAAEV,OAAO,CAACW,SADN,CAERP,OAAO,CAAE,CAACe,cAAc,CAAC,KAAhB,CAAuBW,eAAe,CAAE,KAAxC,CAFD,CAAD,CAAT,CAnBG,QAuBHhC,OAAO,CAAC6B,KAAR,CAAc,mEAAd,EAvBG,yDA2BP,cAAe,SAAUnC,CAAAA,QAAV,wIACb,MAAMC,CAAAA,GAAG,CAAC,CACRC,SAAS,CAACM,OAAO,CAACZ,YAAT,CAAuBA,YAAvB,CADD,CAERM,SAAS,CAACM,OAAO,CAACX,cAAT,CAAyBA,cAAzB,CAFD,CAGRK,SAAS,CAACM,OAAO,CAACV,aAAT,CAAwBA,aAAxB,CAHD,CAIRI,SAAS,CAACM,OAAO,CAACT,aAAT,CAAwBA,aAAxB,CAJD,CAAD,CAAT,CADa","sourcesContent":["import { all, takeEvery, put, call, select } from 'redux-saga/effects'\nimport {message} from \"antd\"\nimport * as clientApis from \"../../services/clients\"\nimport actions from \"./actions\"\n\nconst getClientsState = state => state.clients\n\nexport function* LOAD_CLIENTS({payload}){\n  const {size, page, sort, order, search} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loading: true}\n  })\n  const response = yield call(clientApis.loadClients,size, page, sort, order, search)\n  if (response) {\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false,\n        clients: response.content,\n        totalPages: response.totalPages,\n        totalElements: response.totalElements,\n        size, page, sort, order }\n    })\n  }else{\n    yield put({\n      type: actions.SET_STATE,\n      payload:{ loading:false }\n    })\n  }\n}\n\nexport function* ADD_NEW_CLIENT({payload}){\n  const {newClient} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(clientApis.createNewClinet,newClient)\n  if(response){\n    const {size, page, sort, order} = yield select(getClientsState)\n    message.success('Un nouveau client a été ajouté avec succés');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:false, showAddModal: false}\n    })\n    yield put({\n      type:actions.LOAD_CLIENTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showErrorMessage:true, message:\"Une erreur est survenue, veuillez réessayez dans quelques minutes\"}\n    })\n  }\n}\n\nexport function* UPDATE_CLIENT({payload}){\n  const {clientToEdit} = payload\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(clientApis.updateClient, clientToEdit)\n  if(response){\n    const {size, page, sort, order} = yield select(getClientsState)\n    message.success('Le client a été mis à jour avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showEditModal: false}\n    })\n    yield put({\n      type:actions.LOAD_CLIENTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showEditModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport function* DELETE_CLIENT({payload}){\n  const {clientToDelete} = yield select(getClientsState)\n  yield put({\n    type: actions.SET_STATE,\n    payload: {loadingInModal:true}\n  })\n  const response = yield call(clientApis.deleteClient, clientToDelete)\n  if(response){\n    const {size, page, sort, order} = yield select(getClientsState)\n    message.success('le client a été supprimé avec succès');\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal: false, showErrorMessage:false, showDeleteModal: false}\n    })\n    yield put({\n      type:actions.LOAD_CLIENTS,\n      payload: {size, page, sort, order}\n    })\n  }else {\n    yield put({\n      type: actions.SET_STATE,\n      payload: {loadingInModal:false, showDeleteModal: false }\n    })\n    message.error('Une erreur est survenue, veuillez réessayez dans quelques minutes');\n  }\n}\n\nexport default function* rootSaga() {\n  yield all([\n    takeEvery(actions.LOAD_CLIENTS, LOAD_CLIENTS),\n    takeEvery(actions.ADD_NEW_CLIENT, ADD_NEW_CLIENT),\n    takeEvery(actions.UPDATE_CLIENT, UPDATE_CLIENT),\n    takeEvery(actions.DELETE_CLIENT, DELETE_CLIENT),\n  ])\n}\n"]},"metadata":{},"sourceType":"module"}